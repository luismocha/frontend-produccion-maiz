
<p-toast></p-toast>
<div class="grid">
    <div class="col-12 lg:col-6 xl:col-3">
        <div class="mb-0 bg-blue-300 p-0 m-0">
            <div class="flex justify-content-between mb-3">
                <div>
                    <div class="pl-4 pt-4 text-900 font-medium text-xl text-white">
                        {{totalProductores}}
                    </div>
                    <span class="pl-4 block text-500 font-medium mt-3 text-white">Productores</span>
                </div>
                <div class="mr-5 mt-4 flex align-items-center justify-content-center bg-blue-300 border-round"
                    [ngStyle]="{ width: '2.5rem', height: '2.5rem' }">
                    <i class="pi pi-user text-blue-700" style="font-size: 2.5rem"></i>
                </div>
            </div>
            <div class="flex justify-content-center text-center bg-primary">
                <span class="text-white font-medium mr-2">Información </span>
                <button pButton pRipple type="button" routerLink="/admin/productores" icon="pi pi-arrow-right"
                    class="p-button-rounded p-button-secondary p-button-outlined"
                    style="width: 1.5rem; height: 1.5rem; color: white"></button>
            </div>
        </div>
    </div>
    <div class="col-12 lg:col-6 xl:col-3">
        <div class="mb-0 bg-green-300 p-0 m-0">
            <div class="flex justify-content-between mb-3">
                <div>
                    <div class="pl-4 pt-4 text-900 font-medium text-xl text-white">
                        {{totalIntermediarios}}
                    </div>
                    <span class="pl-4 block text-500 font-medium mt-3 text-white">Intermediarios</span>
                </div>
                <div class="mr-5 mt-4 flex align-items-center justify-content-center bg-green-300 border-round"
                    [ngStyle]="{ width: '2.5rem', height: '2.5rem' }">
                    <i class="pi pi-building text-green-700" style="font-size: 2.5rem"></i>
                </div>
            </div>
            <div class="flex justify-content-center text-center bg-green-600">
                <span class="text-white font-medium mr-2">Información</span>
                <button pButton pRipple type="button" routerLink="/admin/intermediario" icon="pi pi-arrow-right"
                    class="p-button-rounded p-button-secondary p-button-outlined"
                    style="width: 1.5rem; height: 1.5rem; color: white"></button>
            </div>
        </div>
    </div>
    <div class="col-12 lg:col-6 xl:col-3">
        <div class="mb-0 bg-purple-300 p-0 m-0">
            <div class="flex justify-content-between mb-3">
                <div>
                    <div class="pl-4 pt-4 text-900 font-medium text-xl text-white">
                        {{totalCantones}}
                    </div>
                    <span class="pl-4 block text-500 font-medium mt-3 text-white">Cantones</span>
                </div>
                <div class="mr-5 mt-4 flex align-items-center justify-content-center bg-purple-300 border-round"
                    [ngStyle]="{ width: '2.5rem', height: '2.5rem' }">
                    <i class="pi pi-map text-purple-700" style="font-size: 2.5rem"></i>
                </div>
            </div>
            <div class="flex justify-content-center text-center bg-purple-600">
                <span class="text-white font-medium mr-2">Información </span>
                <button pButton pRipple type="button" routerLink="/admin/canton" icon="pi pi-arrow-right"
                    class="p-button-rounded p-button-secondary p-button-outlined"
                    style="width: 1.5rem; height: 1.5rem; color: white"></button>
            </div>
        </div>
    </div>
    <div class="col-12 lg:col-6 xl:col-3">
        <div class="mb-0 bg-red-300 p-0 m-0">
            <div class="flex justify-content-between mb-3">
                <div>
                    <div class="pl-4 pt-4 text-900 font-medium text-xl text-white">
                        2
                    </div>
                    <span class="pl-4 block text-500 font-medium mt-3 text-white">Costo de Producción</span>
                </div>
                <div class="mr-5 mt-4 flex align-items-center justify-content-center bg-red-300 border-round"
                    [ngStyle]="{ width: '2.5rem', height: '2.5rem' }">
                    <i class="pi pi-chart-line text-red-700" style="font-size: 2.5rem"></i>
                </div>
            </div>
            <div class="flex justify-content-center text-center bg-red-600">
                <span class="text-white font-medium mr-2">Información </span>
                <button pButton pRipple type="button" routerLink="/admin/costo-produccion" icon="pi pi-arrow-right"
                    class="p-button-rounded p-button-secondary p-button-outlined"
                    style="width: 1.5rem; height: 1.5rem; color: white"></button>
            </div>
        </div>
    </div>
</div>


<div class="col-12">
    <p-toast [style]="{marginTop: '80px'}"></p-toast>
<p-gmap #gmap [style]="{'width':'100%','height':'320px', 'margin-bottom': '1em'}" [options]="options"
    [overlays]="overlays"  (onOverlayClick)="handleOverlayClick($event)"
    (onOverlayDragEnd)="handleDragEnd($event)"></p-gmap>
<button type="button" pButton label="Zoom In" icon="pi pi-plus" (click)="zoomIn(gmap.getMap())"
    style="margin-right:.25em"></button>
<button type="button" pButton label="Zoom Out" icon="pi pi-minus" (click)="zoomOut(gmap.getMap())"></button>
<p-dialog showEffect="fade" [(visible)]="dialogVisible" header="New Location" [style]="{width: '300px'}">
    <div class="p-grid p-fluid" *ngIf="selectedPosition">
        <div class="p-col-2"><label for="title">Label</label></div>
        <div class="p-col-10"><input type="text" autocomplete="off" pInputText id="title" [(ngModel)]="markerTitle">
        </div>
        <div class="p-col-2"><label for="lat">Lat</label></div>
        <div class="p-col-10"><input id="lat" type="text" readonly pInputText [ngModel]="selectedPosition.lat()"></div>
        <div class="p-col-2"><label for="lng">Lng</label></div>
        <div class="p-col-10"><input id="lng" type="text" readonly pInputText [ngModel]="selectedPosition.lng()"></div>
        <div class="p-col-2"><label for="drg">Drag</label></div>
        <div class="p-col-10">
            <p-checkbox [(ngModel)]="draggable" [style]="{'margin-top':'.25em'}"></p-checkbox>
        </div>
    </div>
    <ng-template pTemplate="footer">
        <div>
            <button type="button" pButton label="Add Marker" icon="pi-plus"></button>
        </div>
    </ng-template>
</p-dialog>
</div>


<!--<div class="col-12">
    <img src="assets/images/mapa.png" width="100%"/>
</div>-->

<!--<p-table #dt1 [value]="listarProductores" [(selection)]="selectedCustomer1" dataKey="nombre" styleClass="p-datatable-customers" [rowHover]="true"
    [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]" [loading]="loading" responsiveLayout="scroll"
    [paginator]="true" currentPageReportTemplate="Mostrando desde {first} a {last} de {totalRecords} elementos"
    [filterDelay]="0" [globalFilterFields]="['id','nombre','activo']">
    <ng-template pTemplate="caption">

        
        <div class="table-header">
            <div class="grid">
                <div class="col-6 mt-3">
                    <h2><b>Productores</b></h2>
                </div>

                <div class="col-6">
                    <div class="col-12 text-right">

                        <div class="grid align-items-center">
                            <div class="col-4 md:col-6 lg:col-6 p-0">Buscar</div>
                            <div class="col-8 md:col-6 lg:col-6">
                                <span class="p-input-icon-left">
                                    <i class="pi pi-search"></i>
                                    <input pInputText type="text" (input)="dt1.filterGlobal($any($event.target).value, 'contains')" placeholder="Global Search" />
                                </span>
                            </div>
                        </div>


                        
                        
                    </div>
                </div>
            </div>

           
        </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="id">
                <div class="flex justify-content-between align-items-center">
                    #
                    <p-sortIcon field="id"></p-sortIcon>
                </div>
            </th>

             <th pSortableColumn="nombre">
                <div class="flex justify-content-between align-items-center">
                    Nombre
                    <p-sortIcon field="nombre"></p-sortIcon>
                </div>
            </th>

            <th pSortableColumn="apellido">
                <div class="flex justify-content-between align-items-center">
                    Apellido
                    <p-sortIcon field="apellido"></p-sortIcon>
                </div>
            </th>

            <th pSortableColumn="cedula">
                <div class="flex justify-content-between align-items-center">
                    Cédula
                    <p-sortIcon field="cedula"></p-sortIcon>
                </div>
            </th>

            <th pSortableColumn="celular">
                <div class="flex justify-content-between align-items-center">
                    Celular
                    <p-sortIcon field="celular"></p-sortIcon>
                </div>
            </th>

            <th pSortableColumn="canton">
                <div class="flex justify-content-between align-items-center">
                    Cantón
                    <p-sortIcon field="canton"></p-sortIcon>
                </div>
            </th>


            <th pSortableColumn="parroquia">
                <div class="flex justify-content-between align-items-center">
                    Parroquia
                    <p-sortIcon field="parroquia"></p-sortIcon>
                </div>
            </th>
            
            
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-productor>
        <tr class="p-selectable-row ">
            
            <td>
                <span class="p-column-title">#</span>
                {{productor.id}}
            </td>
            <td>
                <span class="p-column-title">Nombre</span>
                {{productor.nombre}}
            </td>
            <td>
                <span class="p-column-title">Apellido</span>
                {{productor.apellido}}
            </td>
            <td>
                <span class="p-column-title">Cédula</span>
                <span class="image-text">{{productor.cedula}}</span>
            </td>
            
            <td>
                <span class="p-column-title">Celular</span>
                <span class="image-text">{{productor.celular}}</span>
            </td>

            <td>
                <span class="p-column-title">Cantón</span>
                <span class="image-text">{{productor.fk_canton.nombre}}</span>
            </td>

            <td>
                <span class="p-column-title">Parroquia</span>
                <span class="image-text">{{productor.fk_parroquia.nombre}}</span>
            </td>
        </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
        <tr>
            <td colspan="8">No customers found.</td>
        </tr>
    </ng-template>
</p-table>

<p-table #dt2 [value]="listarIntermediarios" [(selection)]="selectedCustomer3" dataKey="nombre" styleClass="p-datatable-customers" [rowHover]="true"
    [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]" [loading]="loading" responsiveLayout="scroll"
    [paginator]="true" currentPageReportTemplate="Mostrando desde {first} a {last} de {totalRecords} elementos"
    [filterDelay]="0" [globalFilterFields]="['id','lugar', 'activo']">
    <ng-template pTemplate="caption">

        
        <div class="table-header">
            <div class="grid">
                <div class="col-6">
                    <h3 class="mt-4"><b>Intermediarios</b></h3>
                </div>
    
                <div class="col-6">
                    <div class="col-12 text-right">
    
                        <div class="grid align-items-center">
                            <div class="col-4 md:col-6 lg:col-6">Buscar</div>
                            <div class="col-8 md:col-6 lg:col-6 ">
                                <span class="p-input-icon-left">
                                    <i class="pi pi-search"></i>
                                    <input 
                                        pInputText 
                                        type="text" 
                                        (input)="dt2.filterGlobal($any($event.target).value, 'contains')" 
                                        placeholder="Buscar por nombre" />
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="id">
                <div class="flex justify-content-between align-items-center">
                    #
                    <p-sortIcon field="id"></p-sortIcon>
                </div>
            </th>
            <th pSortableColumn="nombre">
                <div class="flex justify-content-between align-items-center">
                    Nombre
                    <p-sortIcon field="nombre"></p-sortIcon>
                </div>
            </th>

            <th pSortableColumn="activo">
                <div class="flex justify-content-between align-items-center">
                    Activo
                    <p-sortIcon field="activo"></p-sortIcon>
                </div>
            </th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-intermediario>
        <tr class="p-selectable-row">
            <td>
                <span class="p-column-title">ID</span>
                {{intermediario.id}}
            </td>
            <td>
                <span class="p-column-title">Nombre</span>
                {{intermediario.lugar}}
            </td>

            <td>
                <span class="p-column-title">Activo</span>
                {{intermediario.activo}}
            </td>
        </tr>
    </ng-template> 
    <ng-template pTemplate="emptymessage">
        <tr>
            <td colspan="8">No customers found.</td>
        </tr>
    </ng-template>
</p-table>

-->

<h1>Grafico</h1>

<div class="card">
    <h5>Productores</h5>
    <p-chart type="bar" [data]="basicData" [options]="basicOptions"></p-chart>
    <h5>Cantones</h5>
</div>

<div style="width: 40%;">
    <p-chart type="pie" [data]="data" [options]="chartOptions"  [style]="{'width': '40%'}"></p-chart>

</div>